# Microsoft Edge 调试指南

## 配置说明

已经修改了 `wxt.config.ts` 配置文件，禁用了自动启动浏览器功能，这样可以避免 Chrome 找不到的错误。

## 调试步骤

### 1. 启动开发模式

在项目根目录运行：

```bash
pnpm dev
```

这个命令会：
- 构建扩展到 `.output/chrome-mv3-dev` 目录
- 监听文件变化并自动重新构建
- 不会自动启动浏览器（避免 Chrome 错误）

### 2. 在 Microsoft Edge 中加载扩展

1. **打开 Microsoft Edge 浏览器**

2. **访问扩展管理页面**
   - 在地址栏输入：`edge://extensions/`
   - 或者点击右上角三点菜单 → 扩展

3. **启用开发者模式**
   - 在页面左下角找到"开发人员模式"开关
   - 将其切换到开启状态

4. **加载未打包的扩展**
   - 点击"加载解压缩的扩展"按钮
   - 浏览并选择项目中的 `.output/chrome-mv3-dev` 文件夹
   - 点击"选择文件夹"

### 3. 测试扩展

加载成功后：
- CookieJar 扩展图标会出现在 Edge 工具栏中
- 访问任意网站（如 https://www.baidu.com）
- 点击 CookieJar 扩展图标
- 查看弹出窗口中显示的 Cookie 信息

### 4. 调试功能

#### 调试弹窗界面
- 右键点击扩展图标 → "检查弹出窗口"
- 或者在扩展管理页面点击扩展下方的"检查视图"

#### 调试后台脚本
- 在扩展管理页面找到你的扩展
- 点击"检查视图" → "背景页"

#### 查看控制台日志
- 在开发者工具的 Console 标签中查看日志输出
- 你的 `console.log` 语句会在这里显示

### 5. 开发工作流

#### 代码修改后的更新流程：
1. 修改代码并保存
2. WXT 会自动检测变化并重新构建
3. 在 Edge 扩展管理页面点击扩展的"刷新"按钮
4. 重新测试扩展功能

#### 常用开发命令：
```bash
# 开发模式（监听文件变化）
pnpm dev

# 构建生产版本
pnpm build

# 类型检查
pnpm compile

# 打包扩展（用于发布）
pnpm zip
```

## 故障排除

### 常见问题及解决方案

1. **扩展无法加载**
   - 确保 `.output/chrome-mv3-dev` 文件夹存在
   - 检查是否运行了 `pnpm dev` 命令

2. **扩展功能异常**
   - 打开开发者工具查看 Console 错误信息
   - 检查网络请求是否正常

3. **权限问题**
   - 确认扩展已获得必要的权限
   - 检查 `wxt.config.ts` 中的权限配置

4. **样式显示异常**
   - 确保 Tailwind CSS 正确加载
   - 检查组件导入路径是否正确

## Edge 特有优势

- **完全兼容**: Edge 基于 Chromium，与 Chrome 扩展 100% 兼容
- **性能监控**: 提供详细的性能分析工具
- **内存管理**: 更好的内存使用监控
- **调试工具**: 与 Chrome DevTools 相同的强大调试功能

## 注意事项

- 每次代码修改后需要手动刷新扩展
- 开发模式下的扩展仅在本地有效
- 发布前需要使用 `pnpm build` 构建生产版本