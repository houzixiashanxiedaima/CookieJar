# 产品需求文档 (PRD) - Cookie Jar

## 📝 版本更新历史

### v1.3.0 - 2025-09-17

#### 🚀 重大UI/UX重构：基于"好品味"设计原则的完整改版

**问题诊断**：当前版本存在严重的信息架构问题和用户体验缺陷，违背了"简洁即是好"的设计哲学。

**核心问题**：
- ❌ 信息层级颠倒：Domain 抢夺主角地位，Key/Value 被边缘化
- ❌ 交互逻辑模糊：单一"copy"按钮造成用户困惑
- ❌ 搜索复杂化：All/Key/Value 切换增加不必要认知负担
- ❌ 视觉不专业：Emoji 和弱对比度降低工具专业感

#### 📊 新版系统架构

```
+-------------------------------------------------------------+
|                                                             |
|  [CJ] Cookie Jar                          v1.3.0            |
|                                                             |
+-------------------------------------------------------------+
|                                                             |
|  [🔍 Search cookies...                                  ]  |
|                                                             |
+-------------------------------------------------------------+
|  13 cookies on github.com                                   |
+-------------------------------------------------------------+
|                                                             |
|  ┌───────────────────────────────────────────────────────┐  |
|  │                                                       │  |
|  │ session_token                              [📋 Copy]  │  | ◄─ Key名称+复制按钮在同一行
|  │ .github.com                                           │  | ◄─ Domain作为次要信息
|  │ ┌───────────────────────────────────────┐ [📋 Copy]  │  | ◄─ Value独立框+复制按钮
|  │ │ eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... │           │  | ◄─ Value在可滚动框内
|  │ └───────────────────────────────────────┘           │  |
|  │                                                       │  |
|  └───────────────────────────────────────────────────────┘  |
|                                                             |
|  ┌───────────────────────────────────────────────────────┐  |
|  │                                                       │  |
|  │ _ga                                        [📋 Copy]  │  |
|  │ .github.com                                           │  |
|  │ ┌───────────────────────────────────────┐ [📋 Copy]  │  |
|  │ │ GA1.2.1234567890.1234567890           │           │  |
|  │ └───────────────────────────────────────┘           │  |
|  │                                                       │  |
|  └───────────────────────────────────────────────────────┘  |
|                                                             |
+-------------------------------------------------------------+
```

#### 🔧 技术架构要点

**1. 信息层级重构（治本）**
- **主角回归**：Key 名称在顶部显示，获得最大视觉权重
- **层级清晰**：Key > Value > Domain 的垂直布局层次
- **空间分配**：Value 在独立的可滚动框中，保证完整显示
- **交互就近**：每个复制按钮紧邻其对应的内容

**2. 交互逻辑简化（治标）**
- **分离式复制**：Key 旁边的 [📋 Copy] 专门复制 Key
- **Value 复制独立**：Value 框旁边的 [📋 Copy] 专门复制 Value
- **即时反馈**：按钮点击后显示 "✓ Copied" 状态
- **搜索统一**：移除 All/Key/Value 切换，使用智能全域搜索
- **搜索范围**：同时搜索 Domain、Key、Value，符合用户直觉

**3. 视觉专业提升（包装）**
- **Logo 升级**：移除 🍪 Emoji，使用 "CJ" 专业文字 Logo
- **对比度优化**：重要文字使用深色，提高可读性
- **按钮明确**：可交互元素具有清晰的"可点击"视觉提示
- **布局优化**：版本号移至合适位置，状态文字紧贴内容

**4. 组件架构设计**
```typescript
interface CookieCardProps {
  name: string;         // Key - 顶部主要显示
  value: string;        // Value - 独立框中显示
  domain: string;       // Domain - 中间辅助信息
  onCopyKey: () => void;    // Key 专用复制函数
  onCopyValue: () => void;  // Value 专用复制函数
  searchQuery?: string;     // 高亮匹配文本
}

// 卡片布局结构
const CookieCard = () => (
  <div className="cookie-card">
    {/* Key 行：名称 + 复制按钮 */}
    <div className="key-row">
      <span className="key-name">{name}</span>
      <button onClick={onCopyKey}>[📋 Copy]</button>
    </div>

    {/* Domain 行：辅助信息 */}
    <div className="domain-row">
      <span className="domain">{domain}</span>
    </div>

    {/* Value 行：独立框 + 复制按钮 */}
    <div className="value-row">
      <div className="value-box">{value}</div>
      <button onClick={onCopyValue}>[📋 Copy]</button>
    </div>
  </div>
);

// 搜索逻辑简化
const searchCookies = (cookies: Cookie[], query: string) => {
  return cookies.filter(cookie =>
    cookie.name.toLowerCase().includes(query.toLowerCase()) ||
    cookie.value.toLowerCase().includes(query.toLowerCase()) ||
    cookie.domain.toLowerCase().includes(query.toLowerCase())
  );
};
```

#### 📋 实施清单

**Phase 1: 卡片布局重构**
- [ ] 实现 Key + Copy 按钮的同行布局
- [ ] 创建 Value 独立可滚动框
- [ ] 调整 Domain 作为中间辅助信息显示
- [ ] 优化卡片内部垂直间距

**Phase 2: 双复制按钮系统**
- [ ] 实现 Key 专用复制按钮
- [ ] 实现 Value 专用复制按钮
- [ ] 添加复制状态反馈（✓ Copied）
- [ ] 优化按钮位置和样式

**Phase 3: 搜索系统简化**
- [ ] 移除 All/Key/Value 过滤切换器
- [ ] 实现统一全域搜索
- [ ] 保持搜索高亮功能
- [ ] 优化搜索性能

**Phase 4: 视觉专业化**
- [ ] 替换 🍪 为 [CJ] 文字 Logo
- [ ] 优化字体权重和大小层级
- [ ] 调整颜色对比度
- [ ] 完善按钮和框架样式

#### 🎯 预期效果

**用户体验提升**：
- 信息获取效率提升 60%（Key/Value 层级清晰）
- 操作错误率降低 80%（明确的双按钮）
- 搜索满意度提升 90%（智能全域搜索）
- 专业感知度提升 100%（视觉升级）

**技术收益**：
- 代码复杂度降低（移除过滤器切换逻辑）
- 组件复用性提升（清晰的 Props 接口）
- 维护成本降低（简化的信息架构）

---

## 📚 历史版本

### v1.2.4 - 2025-09-16
#### 已知问题（待解决）
- 信息层级混乱，Domain 抢夺焦点
- 单一 copy 按钮造成用户困惑
- 搜索切换增加认知负担
- Emoji 降低专业感

### v1.2.0 - 2025-09-15
#### 基础功能
- Cookie 列表展示
- 基本搜索功能
- 复制功能
- 响应式布局

### v1.0.0 - 2025-09-10
#### 初始版本
- 基础 Cookie 读取
- 简单 UI 展示

---

## 🔍 设计原则

遵循 Linus Torvalds 的"好品味"设计哲学：

1. **消除边界情况** > 增加条件判断
2. **直觉优于配置** - 用户期望的搜索行为
3. **功能明确** - 每个按钮只做一件事
4. **视觉层级** - 重要信息获得应有的重视
5. **简洁胜过花哨** - 专业工具的美学

## 🎨 视觉规范

**色彩系统**：
- 主要文字：#1d1d1f (深黑，高对比度)
- 次要文字：#666666 (中灰，Value 显示)
- 辅助文字：#8e8e93 (浅灰，Domain 显示)
- 交互元素：#007AFF (系统蓝，Apple 标准)
- 成功状态：#34C759 (系统绿)

**字体层级**：
- Cookie Key：16px, font-weight: 600 (主角)
- Cookie Value：14px, font-weight: 400 (次要)
- Domain：12px, font-weight: 400 (辅助)
- 按钮文字：12px, font-weight: 500

**布局原则**：
- 卡片内边距：16px
- 元素间距：12px
- 圆角半径：12px
- 按钮高度：32px